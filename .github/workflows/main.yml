name: deploy-to-heroku

on:
  push:
    branches: [ master ]
    
env:
  HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}
  APP_NAME: ${{secrets.APP_NAME }}
  ACCOUNT_EMAIL: ${{secrets.ACCOUNT_EMAIL}} 

jobs:
      
  deploy:
    name: Deploy to Heroku
    runs-on: ubuntu-latest
    steps:

    # Clone the repository
    - name: Checkout
      uses: actions/checkout@v2

    # Build Docker image
    - uses: akhileshns/heroku-deploy@v3.12.12 # This is the action
      with:
        heroku_api_key: $HEROKU_API_KEY
        heroku_app_name: $APP_NAME
        heroku_email: $ACCOUNT_EMAIL
        usedocker: true